<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SaÄŸlÄ±klÄ± YaÅŸam â€“ Milyoner TarzÄ± Quiz</title>
  <style>
    :root{
      --bg:#f6f7fb; --ink:#0b1320; --muted:#475569; --card:#ffffff; --border:#e5e7eb;
      --accent:#2563eb; --accent2:#06b6d4; --ok:#16a34a; --danger:#dc2626; --gold:#b45309;
      --soft:#eef2ff; --shadow:0 8px 24px rgba(15,23,42,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;color:var(--ink);background:linear-gradient(180deg,#ffffff,#f6f7fb 60%)}
    .wrap{max-width:1100px;margin:20px auto;padding:16px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
    h1{margin:0;font-size:clamp(22px,4vw,32px);font-weight:900;letter-spacing:.2px}
    .pill{display:inline-flex;gap:10px;align-items:center;border:none;color:#fff;background:linear-gradient(90deg,var(--accent),var(--accent2));padding:10px 14px;border-radius:999px;font-weight:800;box-shadow:var(--shadow);cursor:pointer}

    .layout{display:grid;grid-template-columns:1.4fr .8fr;gap:16px;margin-top:12px}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow)}

    .stage{padding:16px}
    .qbox{background:var(--soft);border:1px solid #dbeafe;border-radius:14px;padding:16px}
    .q{margin:0 0 8px 0;font-size:clamp(18px,2.6vw,24px);font-weight:900;line-height:1.4}
    .meta{display:flex;gap:12px;flex-wrap:wrap;color:var(--muted);font-size:14px}

    .answers{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px}
    .ans{position:relative;background:#ffffff;border:2px solid #e5e7eb;border-radius:12px;padding:14px 14px 14px 48px;cursor:pointer;user-select:none;font-size:18px;text-align:left}
    .ans:hover{border-color:#cbd5e1}
    .ans[data-state="chosen"]{outline:3px solid #60a5fa;border-color:#60a5fa}
    .ans[data-state="correct"]{background:#ecfdf5;border-color:#86efac}
    .ans[data-state="wrong"]{background:#fef2f2;border-color:#fecaca}
    .ans .mark{position:absolute;left:14px;top:12px;font-weight:900;color:var(--gold)}

    .controls{display:flex;flex-wrap:wrap;gap:10px;margin-top:12px}
    .btn{border:2px solid #e5e7eb;border-radius:12px;padding:10px 12px;background:#ffffff;color:var(--ink);box-shadow:var(--shadow);cursor:pointer;font-weight:800}
    .btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;border:none}
    .btn:disabled{opacity:.6;cursor:not-allowed}

    .ladder{padding:16px}
    .ladder h3{margin:6px 0 12px 0}
    .ladder ol{list-style:none;margin:0;padding:0;display:grid;gap:8px}
    .ladder li{display:flex;justify-content:space-between;gap:10px;background:#ffffff;border:1px solid var(--border);border-radius:12px;padding:10px 12px}
    .ladder li[data-active="true"]{outline:2px solid var(--gold);background:#fff7ed}
    .ladder .step{font-weight:900;color:var(--gold)}
    .ladder .amt{color:var(--muted)}

    .lifelines{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-top:8px}
    .life{background:#f1f5f9;border:1px solid var(--border);border-radius:10px;padding:10px;font-weight:800;text-align:center;cursor:pointer}
    .life[disabled]{opacity:.5;cursor:not-allowed}

    .explain{margin-top:10px;color:var(--muted);font-size:15px}
    .footer{margin-top:10px;color:var(--muted);font-size:12px;text-align:center}

    .stats{display:flex;gap:8px;flex-wrap:wrap}
    .stat{background:#ffffff;border:1px solid var(--border);border-radius:12px;padding:8px 10px;min-width:140px;box-shadow:var(--shadow)}
    .stat .k{display:block;font-size:12px;color:var(--muted)}
    .stat .v{display:block;font-weight:900;font-size:18px}

    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .namebox{display:flex;gap:8px;align-items:center;background:#ffffff;border:1px solid var(--border);border-radius:12px;padding:8px 10px}
    .namebox input{border:none;outline:none;font:inherit}

    #audChart{margin-top:12px}
    .bar{display:flex;gap:8px;align-items:center;margin:4px 0}
    .bar .lbl{width:28px;font-weight:900}
    .bar .track{flex:1;height:14px;background:#e5e7eb;border-radius:999px;overflow:hidden}
    .bar .fill{height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2))}
    .bar .pct{width:40px;text-align:right;font-variant-numeric:tabular-nums}

    .leader{padding:16px}
    .leader h3{margin:6px 0 12px 0}
    table.lb{width:100%;border-collapse:collapse}
    .lb th,.lb td{border-bottom:1px solid var(--border);padding:8px 6px;text-align:left;font-size:14px}
    .lb th{color:var(--muted);font-weight:800}
    .lb td:nth-child(1){width:36px;font-weight:900}
    .lb td:nth-child(2){font-weight:700}
    .empty{color:var(--muted);font-size:14px}

    @media (max-width:880px){
      .layout{grid-template-columns:1fr}
      .answers{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>ğŸ©º SaÄŸlÄ±klÄ± YaÅŸam â€“ Milyoner TarzÄ± Quiz</h1>
      <div class="row">
        <div class="namebox">
          <strong>Ä°sim:</strong>
          <input id="playerName" placeholder="oyuncu adÄ±" maxlength="20" />
          <button id="saveName" class="btn">Kaydet</button>
          <span id="hello" style="color:var(--muted)"></span>
        </div>
        <button id="start" class="pill">Yeni Oyun</button>
        <button id="readQ" class="btn">ğŸ”Š Soruyu Seslendir</button>
        <label class="btn" style="display:flex;gap:6px;align-items:center">
          Ses HÄ±zÄ± <input id="rate" type="range" min="0.7" max="1.4" step="0.05" value="1" />
        </label>
        <div class="stats">
          <div class="stat"><span class="k">En YÃ¼ksek KazanÃ§</span><span class="v" id="bestAmt">â‚º0</span></div>
          <div class="stat"><span class="k">En Ã‡ok DoÄŸru</span><span class="v" id="bestCorrect">0</span></div>
          <div class="stat"><span class="k">En Uzun Seri</span><span class="v" id="bestStreak">0</span></div>
        </div>
      </div>
    </header>

    <div class="layout">
      <section class="card stage" aria-live="polite">
        <div class="qbox">
          <div class="meta"><span id="qIndex">Soru 1</span> â€¢ <span id="progress">1 / 15</span> â€¢ <span id="owner"></span></div>
          <p class="q" id="qText">Ã–nce ismini yaz ve kaydet. Sonra â€œYeni Oyunâ€a tÄ±kla.</p>
        </div>
        <div class="answers" id="answers"></div>
        <div class="controls">
          <button id="lock" class="btn primary" disabled>âœ… CevabÄ± Kilitle</button>
          <button id="next" class="btn" disabled>â¡ Sonraki</button>
        </div>
        <div class="lifelines">
          <button id="fifty" class="life">50:50</button>
          <button id="audience" class="life">ğŸ‘¥ Seyirci</button>
          <button id="phone" class="life">ğŸ“ Telefon</button>
        </div>
        <div id="audChart"></div>
        <div class="explain" id="explain"></div>
        <div class="footer">Not: Bu oyun genel saÄŸlÄ±k okuryazarlÄ±ÄŸÄ±nÄ± eÄŸlenceli biÃ§imde desteklemek iÃ§indir; kiÅŸisel tÄ±bbi tavsiye yerine geÃ§mez.</div>
      </section>

      <aside class="card ladder">
        <h3>Para Merdiveni</h3>
        <ol id="ladder"></ol>
      </aside>

      <section class="card leader">
        <h3>Liderlik Tablosu (Yerel)</h3>
        <table class="lb" id="lbTable"></table>
      </section>

    </div>
  </div>

  <script>
  (()=>{
    const $ = (s)=>document.querySelector(s);
    const $$ = (s)=>Array.from(document.querySelectorAll(s));

    // === Skor ve oyuncu kayÄ±tlarÄ± ===
    const store = {
      keyStats:'hlth_quiz_leaderboard_v1',
      read(){ try{ return JSON.parse(localStorage.getItem(this.keyStats)||'{}'); }catch(e){ return {}; } },
      write(v){ localStorage.setItem(this.keyStats, JSON.stringify(v)); }
    };
    const board = store.read(); // {playerName: {bestAmount,bestCorrect,bestStreak,plays}}

    let currentPlayer = localStorage.getItem('hlth_quiz_player')||'';
    $('#playerName').value = currentPlayer;
    $('#hello').textContent = currentPlayer? `Merhaba, ${currentPlayer}!` : '';
    $('#owner').textContent = currentPlayer? `Oyuncu: ${currentPlayer}` : '';
    $('#saveName').addEventListener('click',()=>{
      const name = ($('#playerName').value||'').trim().slice(0,20);
      if(!name){ alert('LÃ¼tfen bir isim yaz.'); return; }
      currentPlayer = name; localStorage.setItem('hlth_quiz_player', name);
      if(!board[name]) board[name] = {bestAmount:0,bestCorrect:0,bestStreak:0,plays:0};
      store.write(board);
      $('#hello').textContent = `Merhaba, ${name}!`;
      $('#owner').textContent = `Oyuncu: ${name}`;
      refreshStatsUI(); renderLeaderboard();
    });

    function getStats(){
      if(!currentPlayer || !board[currentPlayer]) return {bestAmount:0,bestCorrect:0,bestStreak:0,plays:0};
      return board[currentPlayer];
    }
    function setStats(s){ if(!currentPlayer) return; board[currentPlayer]=s; store.write(board); }

    function fmtAmt(n){ return 'â‚º'+(n||0).toLocaleString('tr-TR'); }
    function refreshStatsUI(){
      const s = getStats();
      $('#bestAmt').textContent = fmtAmt(s.bestAmount);
      $('#bestCorrect').textContent = s.bestCorrect;
      $('#bestStreak').textContent = s.bestStreak;
    }
    refreshStatsUI();

    // === Para merdiveni ===
    const ladder = [100,200,300,500,1000, 2000,4000,8000,16000,32000, 64000,125000,250000,500000,1000000];

    // === 5. sÄ±nÄ±f dÃ¼zeyinde soru bankasÄ± ===
    const bank = [
      {id:1,q:"SÃ¼per kahramanlarÄ±n vÃ¼cudu hangi makineye benzetilebilir?",a:["Oyuncak araba","GÃ¼Ã§lÃ¼ bir makine","Karton kutu","TaÅŸ"],c:1,info:"Metne gÃ¶re vÃ¼cut gÃ¼Ã§lÃ¼ bir makine gibidir."},
      {id:2,q:"Dengeli beslenmede tabaÄŸÄ±n renkli olmasÄ± ne saÄŸlar?",a:["Daha Ã§abuk doymak","Vitamin ve mineral almak","Renkli gÃ¶rÃ¼nmek","HiÃ§bir ÅŸey"],c:1,info:"Sebze ve meyveler renkleriyle farklÄ± vitaminler taÅŸÄ±r."},
      {id:3,q:"Hangi besin grubu kaslarÄ±mÄ±zÄ± gÃ¼Ã§lendirir?",a:["Åekerli yiyecekler","YapÄ±cÄ±-OnarÄ±cÄ± besinler","Sadece meyveler","Sadece makarna"],c:1,info:"SÃ¼t, yumurta ve et yapÄ±cÄ±-onarÄ±cÄ±dÄ±r."},
      {id:4,q:"Enerji veren tahÄ±llar hangi gÃ¼cÃ¼ saÄŸlar?",a:["Renk gÃ¼cÃ¼","GÃ¼n boyu enerji","Uykusuzluk","HastalÄ±k"],c:1,info:"Tam tahÄ±llar enerji deposudur."},
      {id:5,q:"VÃ¼cudumuzun en doÄŸal iÃ§eceÄŸi hangisidir?",a:["Gazoz","Su","Meyve suyu","Enerji iÃ§eceÄŸi"],c:1,info:"Metne gÃ¶re en doÄŸal iÃ§ecek sudur."},
      {id:6,q:"Hareket etmek beynimize nasÄ±l yardÄ±mcÄ± olur?",a:["Daha hÄ±zlÄ± bÃ¼yÃ¼tÃ¼r","Daha Ã§ok oksijen saÄŸlar","Bizi uykusuz bÄ±rakÄ±r","Oyun puanÄ±nÄ± artÄ±rÄ±r"],c:1,info:"Hareket kan dolaÅŸÄ±mÄ±nÄ± hÄ±zlandÄ±rÄ±r."},
      {id:7,q:"GÃ¼nde en az kaÃ§ dakika hareket Ã¶nerilir?",a:["10 dakika","30 dakika","60 dakika","5 dakika"],c:2,info:"Metne gÃ¶re gÃ¼nde en az bir saat harekettir."},
      {id:8,q:"Hareket etmek ders Ã§alÄ±ÅŸÄ±rken neyi artÄ±rÄ±r?",a:["Konsantrasyon","AÃ§lÄ±ÄŸÄ±","YorgunluÄŸu","UykusuzluÄŸu"],c:0,info:"Hareket dikkat ve Ã¶ÄŸrenmeyi destekler."},
      {id:9,q:"Uyku sÄ±rasÄ±nda vÃ¼cut nasÄ±l Ã§alÄ±ÅŸÄ±r?",a:["HiÃ§ Ã§alÄ±ÅŸmaz","Gizli laboratuvar gibi Ã§alÄ±ÅŸÄ±r","Sadece dinlenir","Oyun oynar"],c:1,info:"Metinde uyku gizli laboratuvar olarak anlatÄ±lÄ±r."},
      {id:10,q:"10 yaÅŸÄ±ndaki bir Ã§ocuÄŸun kaÃ§ saat uyumasÄ± Ã¶nerilir?",a:["3-4 saat","6-7 saat","9-11 saat","12-15 saat"],c:2,info:"Metne gÃ¶re 9-11 saat uyku idealdir."},
      {id:11,q:"Uyku vÃ¼cudumuzda neleri dÃ¼zenler?",a:["Boyu kÄ±saltÄ±r","Ã–ÄŸrendiklerimizi dÃ¼zenler","Bizi hasta eder","HiÃ§bir ÅŸey yapmaz"],c:1,info:"Uyku bilgileri dÃ¼zenler ve hÃ¼creleri onarÄ±r."},
      {id:12,q:"Hangi durum mikrop bulaÅŸmasÄ±nÄ± Ã¶nler?",a:["Ellerimizi yÄ±kamak","HiÃ§ yÄ±kamamak","Sadece koklamak","Kuru bezle silmek"],c:0,info:"Hijyen saÄŸlÄ±ÄŸÄ± korur."},
      {id:13,q:"Ellerimizi Ã¶zellikle ne zaman yÄ±kamalÄ±yÄ±z?",a:["Oyun oynarken","Sabah uyanÄ±nca","Yemekten Ã¶nce","HiÃ§bir zaman"],c:2,info:"Yemekten Ã¶nce eller temiz olmalÄ±dÄ±r."},
      {id:14,q:"Mikroplar metinde nasÄ±l tanÄ±mlanmÄ±ÅŸtÄ±r?",a:["GÃ¶rÃ¼nÃ¼r canavarlar","GÃ¶rÃ¼nmez dÃ¼ÅŸmanlar","Hayvanlar","IÅŸÄ±klar"],c:1,info:"Mikroplar gÃ¶rÃ¼nmez dÃ¼ÅŸman olarak anlatÄ±lÄ±r."},
      {id:15,q:"Dengeli beslenmede hangi grup "GÃ¶kkuÅŸaÄŸÄ± GÃ¼cÃ¼" olarak geÃ§er?",a:["Etler","Sebze ve meyveler","GazlÄ± iÃ§ecekler","Åekerler"],c:1,info:"Sebze ve meyveler renkleriyle gÃ¼Ã§ saÄŸlar."},
      {id:16,q:"Bir sÃ¼per kahramanÄ±n en Ã¶nemli gÃ¼cÃ¼ ne olabilir?",a:["SÃ¼rekli oyun oynamak","SaÄŸlÄ±klÄ± yaÅŸamak","HiÃ§ uyumamak","Hep oturmak"],c:1,info:"Metin saÄŸlÄ±klÄ± yaÅŸamÄ± sÃ¼per gÃ¼Ã§ gibi anlatÄ±r."},
      {id:17,q:"Uyku sÄ±rasÄ±nda hangi hormon salgÄ±lanÄ±r?",a:["BÃ¼yÃ¼me hormonu","Åeker hormonu","Sinir hormonu","Kafein hormonu"],c:0,info:"Metne gÃ¶re uyku bÃ¼yÃ¼me hormonu salgÄ±latÄ±r."},
      {id:18,q:"Hareket etmek neden "seviye atlamak" gibidir?",a:["Daha Ã§ok ÅŸeker saÄŸlar","Daha Ã§evik yapar","Oyun karakteri verir","Daha az enerji saÄŸlar"],c:1,info:"Metin hareketi oyun benzetmesiyle aÃ§Ä±klar."},
      {id:19,q:"AÅŸaÄŸÄ±dakilerden hangisi hijyenin bir parÃ§asÄ±dÄ±r?",a:["Kirli ellerle yemek","Tuvaletten sonra el yÄ±kamak","Ellerle her yere dokunmak","Eller yÄ±kamamak"],c:1,info:"Hijyen gÃ¶rÃ¼nmez dÃ¼ÅŸmanlara karÅŸÄ± kalkandÄ±r."},
      {id:20,q:"Tam tahÄ±llar neden Ã¶nemlidir?",a:["TatlÄ±dÄ±r","Enerji verir","HiÃ§bir iÅŸe yaramaz","Kokusu gÃ¼zeldir"],c:1,info:"Enerji deposudurlar."},
      {id:21,q:"Sebze ve meyveler neden gÃ¶kkuÅŸaÄŸÄ± gibi olmalÄ±dÄ±r?",a:["SÃ¼s olsun diye","FarklÄ± vitamin ve mineraller iÃ§in","Oyun gibi olsun diye","Daha pahalÄ± olsun diye"],c:1,info:"Renk Ã§eÅŸitliliÄŸi besin Ã§eÅŸitliliÄŸidir."},
      {id:22,q:"Su beynimize nasÄ±l yardÄ±mcÄ± olur?",a:["Daha aÄŸÄ±r Ã§alÄ±ÅŸtÄ±rÄ±r","HÄ±zlÄ± mesaj gÃ¶ndermeyi saÄŸlar","Bilgileri siler","UyutÄ±r"],c:1,info:"Metne gÃ¶re beyin mesaj iletiÅŸimini hÄ±zlandÄ±rÄ±r."},
      {id:23,q:"Hareket etmeyen bir Ã§ocuk nasÄ±l hissedebilir?",a:["Daha zinde","Daha yavaÅŸ ve yorgun","Daha hÄ±zlÄ±","Daha enerjik"],c:1,info:"Hareket eksikliÄŸi vÃ¼cudu yorar."},
      {id:24,q:"Uyku neden Ã¶nemlidir?",a:["Bilgileri dÃ¼zenler","Bizi hasta eder","Oyun kazandÄ±rÄ±r","Enerji azaltÄ±r"],c:0,info:"Uyku vÃ¼cudu onarÄ±r ve bilgileri dÃ¼zenler."},
      {id:25,q:"Hijyenin amacÄ± nedir?",a:["Mikroplarla arkadaÅŸ olmak","MikroplarÄ± uzaklaÅŸtÄ±rmak","Ellerimizi kirletmek","HiÃ§bir ÅŸey"],c:1,info:"Temizlik mikrop bulaÅŸmasÄ±nÄ± azaltÄ±r."},
      {id:26,q:"Bir Ã§ocuk neden sebze yemelidir?",a:["Renkli olduklarÄ± iÃ§in","Vitamin ve mineral almak iÃ§in","Daha pahalÄ± olduÄŸu iÃ§in","HiÃ§bir sebep yok"],c:1,info:"Sebzeler vitamin-mineral saÄŸlar."},
      {id:27,q:"SÃ¼per kahraman benzetmesindeki "gizli laboratuvar" neyi temsil eder?",a:["SÄ±nÄ±fÄ±","Oyunu","Uykuyu","Suyu"],c:2,info:"Metne gÃ¶re uyku gizli laboratuvar gibidir."},
      {id:28,q:"Temizlik hangi durumlarda Ã¶zellikle gereklidir?",a:["Sadece akÅŸam","Yemekten Ã¶nce ve tuvaletten sonra","HiÃ§bir zaman","Sadece okulda"],c:1,info:"Bu iki zaman hijyen iÃ§in kritiktir."},
      {id:29,q:"Hareket etmek hangi organÄ±mÄ±za oksijen taÅŸÄ±r?",a:["Kulak","Beyin","TÄ±rnak","Dil"],c:1,info:"Hareket kan dolaÅŸÄ±mÄ±yla oksijeni artÄ±rÄ±r."},
      {id:30,q:"Tam tahÄ±l tÃ¼ketmek neden enerji saÄŸlar?",a:["Ã‡Ã¼nkÃ¼ Ã§ok tatlÄ±dÄ±r","Ã‡Ã¼nkÃ¼ karbonhidrat iÃ§erir","HiÃ§bir iÅŸe yaramaz","Sadece sÃ¼slÃ¼dÃ¼r"],c:1,info:"TahÄ±llar enerji kaynaÄŸÄ±dÄ±r."},
      {id:31,q:"Dengeli beslenmenin amacÄ± nedir?",a:["Hastalanmak","VÃ¼cudu gÃ¼Ã§lÃ¼ tutmak","HiÃ§ yemek yememek","Sadece tatlÄ± tÃ¼ketmek"],c:1,info:"Dengeli beslenme vÃ¼cudu destekler."},
      {id:32,q:"Hareket etmek beynimizde hangi etkiyi oluÅŸturur?",a:["Daha Ã§ok oksijen","Daha az Ã¶ÄŸrenme","UnutkanlÄ±k","AÄŸrÄ±"],c:0,info:"Ã‡ok oksijen alan beyin daha iyi Ã¶ÄŸrenir."},
      {id:33,q:"Su iÃ§mek neden Ã¶nemlidir?",a:["Sadece yaz iÃ§in","VÃ¼cudun her gÃ¼n suya ihtiyacÄ± olduÄŸu iÃ§in","Ä°Ã§ecek yoksa","Su tadÄ± iÃ§in"],c:1,info:"Su temel ihtiyaÃ§tÄ±r."},
      {id:34,q:"Hijyen hangi gÃ¼Ã§le benzetilmiÅŸtir?",a:["GÃ¶rÃ¼nmez kalkan","Roket","Araba","Robot"],c:0,info:"Metinde temizlik gÃ¶rÃ¼nmez kalkan olarak geÃ§er."},
      {id:35,q:"Sebze ve meyve tÃ¼ketirken nasÄ±l bir tabak Ã¶nerilir?",a:["Tek renk","RengÃ¢renk","Sadece kÄ±rmÄ±zÄ±","HiÃ§biri"],c:1,info:"GÃ¶kkuÅŸaÄŸÄ± gÃ¼cÃ¼!"},
      {id:36,q:"Uyku hÃ¼crelere nasÄ±l yardÄ±m eder?",a:["OnarÄ±r","Dondurur","Yok eder","YavaÅŸlatÄ±r"],c:0,info:"Uyku hÃ¼cre onarÄ±mÄ±nÄ± destekler."},
      {id:37,q:"GÃ¼nde hareket etmek hangi oyun terimiyle anlatÄ±lmÄ±ÅŸtÄ±r?",a:["KayÄ±t silme","Seviye atlama","Yeniden baÅŸlama","Hata verme"],c:1,info:"Metindeki oyun benzetmesi."},
      {id:38,q:"Mikroplardan korunmanÄ±n en kolay yolu nedir?",a:["Ellerimizi yÄ±kamak","HiÃ§ yÄ±kanmamak","SÃ¼rekli dokunmak","Her yere el sÃ¼rmek"],c:0,info:"Temizlik en etkili yÃ¶ntemdir."},
      {id:39,q:"Uyumayan bir Ã§ocuk sabah nasÄ±l hisseder?",a:[

    // === Durum ===
    const QUESTIONS_PER_GAME = 15;
    let deck = [];
    const state = { i:-1, locked:false, chosen:null, used:{fifty:false,audience:false,phone:false}, correct:0, streak:0 };

    // === UI referanslarÄ± ===
    const ansBox = $('#answers');
    const qText = $('#qText');
    const qIndex = $('#qIndex');
    const progress = $('#progress');
    const explain = $('#explain');
    const lockBtn = $('#lock');
    const nextBtn = $('#next');
    const rate = $('#rate');
    const ladderEl = $('#ladder');
    const audChart = $('#audChart');

    // === Ses efektleri (Web Audio) ===
    let AC; const ctx = ()=> AC||(AC=new (window.AudioContext||window.webkitAudioContext)());
    function tone(freq, dur=0.2, type='sine', vol=0.15){
      const a = ctx(); const o=a.createOscillator(); const g=a.createGain();
      o.type=type; o.frequency.value=freq; g.gain.value=vol; o.connect(g); g.connect(a.destination);
      const t=a.currentTime; g.gain.setValueAtTime(vol,t); g.gain.exponentialRampToValueAtTime(0.0001, t+dur);
      o.start(t); o.stop(t+dur);
    }
    function sfxCorrect(){ tone(523,0.12,'triangle'); setTimeout(()=>tone(659,0.12,'triangle'),120); setTimeout(()=>tone(784,0.18,'triangle',0.18),240); }
    function sfxWrong(){ tone(110,0.25,'sawtooth',0.2); setTimeout(()=>tone(90,0.3,'sawtooth',0.18),220); }

    // === Para merdiveni Ã§izimi ===
    function drawLadder(active){
      ladderEl.innerHTML = ladder.map((amt,idx)=>{
        const step = idx+1; const isActive = active===idx; const g = (step===5||step===10)? ' â€” Garantili' : '';
        return `<li data-active="${isActive}"><span class="step">${step}. Soru</span><span class="amt">${fmtAmt(amt)}${g}</span></li>`;
      }).reverse().join('');
    }
    drawLadder(-1);
    function guaranteedAmount(idx){ if(idx>=9) return ladder[9]; if(idx>=4) return ladder[4]; return 0; }

    // === Oyun kontrol ===
    function start(){
      if(!currentPlayer){ alert('Ã–nce ismini yaz ve Kaydetâ€™e bas.'); return; }
      state.i = -1; state.locked=false; state.chosen=null; state.used={fifty:false,audience:false,phone:false}; state.correct=0; state.streak=0;
      deck = createDeck();
      $$('.life').forEach(b=>{ b.disabled=false; });
      next();
    }

    function next(){
      state.i++;
      if(state.i>=deck.length){ finish(true); return; }
      const item = deck[state.i];
      qText.textContent = item.q;
      qIndex.textContent = `Soru ${state.i+1}`;
      progress.textContent = `${state.i+1} / ${deck.length}`;
      explain.textContent = '';
      audChart.innerHTML = '';
      lockBtn.disabled = true; nextBtn.disabled = true;
      state.locked=false; state.chosen=null;
      drawAnswers(item);
      highlightLadder();
      readQuestion();
    }

    function drawAnswers(item){
      const letters = ['A','B','C','D'];
      ansBox.innerHTML = item.a.map((t,idx)=>`<button class="ans" data-idx="${idx}" data-state="idle"><span class="mark">${letters[idx]}</span>${t}</button>`).join('');
      $$('.ans').forEach(btn=> btn.addEventListener('click',()=>choose(+btn.dataset.idx)) );
    }

    function choose(idx){
      if(state.locked) return; state.chosen=idx; lockBtn.disabled=false; nextBtn.disabled=true;
      $$('.ans').forEach(b=>b.dataset.state='idle');
      const chosenBtn = $$('.ans')[idx];
      chosenBtn.dataset.state='chosen';
    }

    function lock(){
      if(state.chosen==null || state.locked) return; state.locked=true;
      const item = deck[state.i];
      const correct = state.chosen===item.c;
      $$('.ans').forEach((b,i)=>{
        if(i===item.c) b.dataset.state='correct';
        else if(i===state.chosen) b.dataset.state='wrong';
        else b.dataset.state='idle';
      });
      if(correct){ state.correct++; state.streak++; sfxCorrect(); }
      else { state.streak=0; sfxWrong(); }
      explain.textContent = (correct? 'DoÄŸru! ':'YanlÄ±ÅŸ. ') + (item.info||'');
      nextBtn.disabled=false; lockBtn.disabled=true;
      if(!correct){ finish(false); }
    }

    function finish(won){
      const idx = Math.min(state.i, deck.length-1);
      const prize = won? ladder[ladder.length-1] : guaranteedAmount(idx-1);
      qText.textContent = won? `Tebrikler! ${fmtAmt(prize)} kazandÄ±n, ${currentPlayer}!` : `Oyun bitti, ${currentPlayer}. KazanÄ±lan garanti tutar: ${fmtAmt(prize)}.`;
      ansBox.innerHTML = '';
      explain.textContent = `DoÄŸru sayÄ±n: ${state.correct}. Yeniden oynamak iÃ§in â€œYeni Oyunâ€.`;
      nextBtn.disabled=true; lockBtn.disabled=true;
      $$('.life').forEach(b=> b.disabled=true);
      drawLadder(-1);

      const s = getStats();
      if(prize>s.bestAmount) s.bestAmount=prize;
      if(state.correct>s.bestCorrect) s.bestCorrect=state.correct;
      if(state.streak>s.bestStreak) s.bestStreak=state.streak;
      s.plays=(s.plays||0)+1; setStats(s); refreshStatsUI(); renderLeaderboard();
    }

    function highlightLadder(){
      const items = Array.from(ladderEl.querySelectorAll('li')).reverse();
      items.forEach((li,i)=> li.dataset.active = (i===state.i));
    }

    // === Jokerler ===
    $('#fifty').addEventListener('click',()=>{
      if(state.used.fifty||state.i<0) return; state.used.fifty=true; $('#fifty').disabled=true;
      const item = deck[state.i];
      const pool = [0,1,2,3].filter(i=> i!==item.c);
      shuffle(pool); const toHide = pool.slice(0,2);
      toHide.forEach(i=>{ const b = $$('.ans')[i]; b.disabled=true; b.style.opacity=.55; });
    });

    $('#audience').addEventListener('click',()=>{
      if(state.used.audience||state.i<0) return; state.used.audience=true; $('#audience').disabled=true;
      const item = deck[state.i];
      const base = [10,10,10,10]; base[item.c]+=50+Math.floor(Math.random()*21);
      const sum = base.reduce((a,b)=>a+b,0); const pct = base.map(v=> Math.round(100*v/sum));
      drawAudienceChart(pct);
      speak(`Seyirci oylamasÄ±: A yÃ¼zde ${pct[0]}, B yÃ¼zde ${pct[1]}, C yÃ¼zde ${pct[2]}, D yÃ¼zde ${pct[3]}.`);
    });

    $('#phone').addEventListener('click',()=>{
      if(state.used.phone||state.i<0) return; state.used.phone=true; $('#phone').disabled=true;
      const item = deck[state.i];
      const suggestion = Math.random()<0.75 ? item.c : randInt(0,3);
      const letters = ['A','B','C','D'];
      speak(`Bence cevap ${letters[suggestion]} olabilir, ama emin deÄŸilim.`);
    });

    function drawAudienceChart(pct){
      const letters=['A','B','C','D'];
      audChart.innerHTML = letters.map((l,i)=>
        `<div class="bar"><span class="lbl">${l}</span><div class="track"><div class="fill" style="width:${pct[i]}%"></div></div><span class="pct">%${pct[i]}</span></div>`
      ).join('');
    }

    // === TTS ===
    $('#readQ').addEventListener('click', ()=>readQuestion());
    function readQuestion(){
      if(state.i<0) return;
      const item = deck[state.i];
      const letters = ['A','B','C','D'];
      const text = `Soru ${state.i+1}. ${item.q}. SeÃ§enekler: ` + item.a.map((t,i)=>`${letters[i]}: ${t}`).join(', ');
      speak(text);
    }
    function speak(text){
      try{ window.speechSynthesis.cancel(); }catch(e){}
      const u = new SpeechSynthesisUtterance(text);
      const vs = speechSynthesis.getVoices();
      const tr = vs.find(v=>/tr|Turk/i.test(v.lang||v.name)) || vs.find(v=>/Turk/i.test(v.name||''));
      if(tr){
        u.voice = tr;
        u.lang = tr.lang || 'tr-TR';
      } else {
        u.lang = 'tr-TR';
      }
      u.rate = parseFloat(rate.value||'1');
      speechSynthesis.speak(u);
    }

    // === AraÃ§lar ===
    function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]]; } return a; }
    function randInt(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }
    function escapeHtml(s){ const map = {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;'}; return String(s).replace(/[&<>"']/g, ch => map[ch]); }

    function createDeck(){
      const idxs = [...Array(bank.length).keys()];
      shuffle(idxs);
      const pick = idxs.slice(0, QUESTIONS_PER_GAME);
      return pick.map(i=>{
        const it = bank[i];
        const perm = shuffle([0,1,2,3]);
        const a = perm.map(k=> it.a[k]);
        const c = perm.indexOf(it.c);
        return {id: it.id, q: it.q, a, c, info: it.info};
      });
    }

    function renderLeaderboard(){
      const all = store.read();
      const rows = Object.entries(all).map(([name,s])=>({name, ...(s||{})}));
      rows.sort((a,b)=> (b.bestAmount||0)-(a.bestAmount||0) || (b.bestCorrect||0)-(a.bestCorrect||0) || (b.bestStreak||0)-(a.bestStreak||0) || (b.plays||0)-(a.plays||0));
      const top = rows.slice(0,10);
      const el = document.getElementById('lbTable');
      if(!el) return;
      if(top.length===0){ el.innerHTML = '<tr><td class="empty">HenÃ¼z kayÄ±t yok.</td></tr>'; return; }
      el.innerHTML = '<thead><tr><th>#</th><th>Oyuncu</th><th>En YÃ¼ksek</th><th>DoÄŸru</th><th>Seri</th><th>Oyun</th></tr></thead>'+
        '<tbody>'+
        top.map((r,i)=>`<tr><td>${i+1}</td><td>${escapeHtml(r.name)}</td><td>${fmtAmt(r.bestAmount||0)}</td><td>${r.bestCorrect||0}</td><td>${r.bestStreak||0}</td><td>${r.plays||0}</td></tr>`).join('')+
        '</tbody>';
    }

    // === Olaylar ===
    const startBtn = $('#start');
    startBtn.addEventListener('click', start);
    lockBtn.addEventListener('click', lock);
    nextBtn.addEventListener('click', next);

    // Klavye kÄ±sayollarÄ±
    window.addEventListener('keydown', (e)=>{
      if(['1','2','3','4'].includes(e.key)){
        const idx = +e.key - 1; const b = $$('.ans')[idx]; if(b && !b.disabled) choose(idx);
      }
      if(e.key==='Enter'){ if(!lockBtn.disabled) lock(); else if(!nextBtn.disabled) next(); }
      if(e.key===' '){ e.preventDefault(); readQuestion(); }
    });

    // === Kendini Testler (console) ===
    function runSelfTests(){
      const tests = [];
      // Test 1: Destede 15 soru var mÄ±?
      const d = createDeck();
      tests.push({name:'Deck length 15', pass: d.length===15});
      // Test 2: Her soruda 4 ÅŸÄ±k var mÄ±?
      tests.push({name:'Each item has 4 answers', pass: d.every(it=>Array.isArray(it.a)&&it.a.length===4)});
      // Test 3: DoÄŸru index aralÄ±kta mÄ±?
      tests.push({name:'Correct index in [0,3]', pass: d.every(it=>it.c>=0 && it.c<4)});
      // Test 4: guaranteedAmount Ã§alÄ±ÅŸÄ±yor mu?
      tests.push({name:'Guaranteed amount tiers', pass: guaranteedAmount(3)===0 && guaranteedAmount(4)===1000 && guaranteedAmount(9)===32000});
      // Test 5: Destedeki sorularÄ±n id'leri benzersiz mi?
      const ids = d.map(x=>x.id); const uniq = new Set(ids);
      tests.push({name:'Unique question ids', pass: uniq.size===ids.length});
      // Test 6: shuffle uzunluÄŸu koruyor mu?
      const arr=[1,2,3,4,5]; const arr2=shuffle([...arr]);
      tests.push({name:'Shuffle length preserved', pass: arr2.length===arr.length});
      // Test 7: speak fonksiyonunda dil atanÄ±yor mu? (run-time check)
      try{
        const u = new SpeechSynthesisUtterance('test');
        // sadece eriÅŸim; gerÃ§ek konuÅŸma yok
        const vs = speechSynthesis.getVoices();
        tests.push({name:'SpeechSynthesis available', pass: Array.isArray(vs)});
      }catch(e){ tests.push({name:'SpeechSynthesis available', pass:false}); }

      console.group('%cSelf Tests','color:#2563eb;font-weight:bold');
      tests.forEach(t=> console[t.pass?'log':'error'](`${t.pass?'âœ…':'âŒ'} ${t.name}`));
      console.groupEnd();
    }
    runSelfTests();

    // Ä°lk yÃ¼klemede liderlik tablosunu Ã§iz
    renderLeaderboard();
  })();
  </script>
</body>
</html>
